{% extends "base.html" %}

{% block content %}



    <div class="grid-container">
        <div class="grid-x grid-padding-x">
          <div class="large-12 cell">
            <h1>{{ title }}</h1>
          </div>
        </div>



        <div class="grid-x grid-margin-x">
                <div class="medium-8 large-8 small-12 cell">
                       <!--  {% include 'form.html' %} -->
                </div>
                <div class="medium-4 large-4 small-12 cell">
                    <form action="{{ url_for('remove') }}" method="post" id="remove">    
                    {% for i in EN_list %}    
                        <input type="checkbox" name="rowID" value="{{ i.rowID }}"> "{{ i.rowID }}" <br>
                    {% endfor %}
                        <input class="submit button" type="submit" value="Submit" id="submit">
                        </form>

                            <p class="external"><strong>news</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'news' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{ i.date }}  -- Row ID: {{ i.rowID }} </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}

                            <p class="external"><strong>Demonstration</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'demo' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}

                            <p class="external"><strong>Services</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'services' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}

                            <p class="internal"><strong>EA</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'ea' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}

                            <p class="internal"><strong>Capital</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'capital' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}                            

                            <p class="internal"><strong>Promotions</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'promo' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}


                            <p class="internal"><strong>Proposals - Unsolicited BoMs</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'proposal' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}                            

                            <p class="internal"><strong>SPIFFs</strong></p>
                            {% for i in EN_list %}
                                {% if i.category == 'spiff' %}
                                    <ul>
                                        <li>{{ i.bullet }}   --  <strong>{{   i.date }}  -- Row ID: {{ i.rowID }}  </strong></li>
                                        {% if i.subBullet1 %}
                                            <ul>
                                                <li>{{ i.subBullet1 }}  {{ i.sb1Link }}</li>
                                            </ul>
                                        {% endif %}
                                    </ul>
                                {% endif %}
                                
                            {% endfor %}                            





                </div>
                
              </div>




        </div>
        
        {% endblock %}


    {% block javascript %}
       <!--  <script src={{ url_for('static',filename='myscript.js') }}></script> -->
       <script>
            $( document ).ready(function() {

                console.log("Document Loaded");
         
            });        
        </script>


<script>
        $(document).on('submit','form',function(event){ //looks for any form on page that is submitted
            event.preventDefault(); // Stop form from submitting normally

            // Get some values from elements on the page:
            var $form = $( this ); //loads all data from form into parent variable
            var form_id = $form.attr('id'); //find the ID of the submitted form
            console.log(form_id); //for testing
            //var email = $form.find( "input[name='email']" ).val(); //get the value of the email field
            var url = $form.attr( "action" ); //for  flask to know what URL is associated with POST  
            console.log(url);              

            if (form_id == 'remove'){
                console.log("This is the remove function");
                
                var rows = $form.find( "input[name='rowID']" ); //remove the filed input on submit   
                //$form.find( "input[name='rowID']" ).val(""); //remove the filed input on submit 
                                     
                $.ajax({
                    url: url,
                    data: {'function':form_id ,'rows': rows},
                    type: 'POST',
                    timeout: 10000,
                    success: function(response){
                        console.log(response)
                        
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        console.log(textStatus);
                        //document.getElementById('display').innerHTML = textStatus;
                    }
                });                         
            } 

        return false; //not sure why this is needed, maybe saying if no ajax post then do nothing
    });

        </script>
    {% endblock %}        

